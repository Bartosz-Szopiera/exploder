<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Szopiera Bartosz</title>
    <link rel="stylesheet" href="css/master.css">
    <base href="/" target="_blank">
  </head>
  <body class="body">
    <main>
      <div class="textToExplode">
        <form class="textToExplode" action="index.html" method="post">
          <input type="text" name="text" value="HELLO!">
        </form>
      </div>
      <div class="background"></div>
      <div class="display">
        <div class="display"></div>
      </div>
      <div class="tabs">
        <div class="labels">
          <div class="label settings" onclick="showTab('settings')">Explosion Settings</div>
          <div class="label profile" onclick="showTab('profile')">Your Profile</div>
          <div class="label about" onclick="showTab('about')">About</div>
        </div>
        <div class="panels">
          <div class="tab settings hidden">
            <div class="input">
              <label for="scale">Scale</label>
              <input id="scale" type="range" min="0.5" max="2.0" name="scale" value="1.0" step="0.1">
            </div>
            <div class="input">
              <label for="randomize">Random Moves</label>
              <input id="randomize" type="range" min="0" max="100" name="rand" value="15" step="1">
            </div>
            <div class="input">
              <label for="range">Range</label>
              <input id="range" type="range" min="0.5" max="1.0" step="0.1" name="range" value="0.5">
            </div>
            <div class="input">
              <label for="density">Density</label>
              <input id="density" type="range" min="1" max="16" name="scale" value="1">
            </div>
            <div class="input">
              <label for="speed">Speed</label>
              <input id="speed" type="range" min="1" max="60" step="1" name="speed" value="15">
            </div>
            <!-- <div class="input">
              <label for="acceleration">Acceleration</label>
              <input id="acceleration" type="text" name="scale" value="1.0">
            </div> -->
            <!-- <div class="input">
              <label for="direction">Direction</label>
              <input id="direction" type="text" name="scale" value="1.0">
            </div> -->
            <!-- <div class="input">
              <label for="trajectory">Trajectory</label>
              <input id="trajectory" type="checkbox" name="trajectory" value="straight">
              <input id="trajectory" type="checkbox" name="trajectory" value="sinusoid">
              <input type="text" name="amplitude" value="">
              <input id="trajectory" type="checkbox" name="trajectory" value="parabola">
              <input id="trajectory" type="checkbox" name="trajectory" value="spiral">
              <input type="text" name="curvature" value="">
            </div> -->
            <!-- <div class="input">
              <label for="degradation">Degradation</label>
              <input id="degradation" type="text" name="degradation" value="1.0">
            </div> -->
            <div class="button" onclick="showDatabase()">
              Show Database
            </div>
          </div>
          <div class="tab profile hidden">
            <div class="identification">
              <div class="userName">
                <p>Hello Nameless</p>
              </div>
              <div class="input login">
                <input type="text" name="" value="" placeholder="User Name">
              </div>
              <div class="input password">
                <input type="password" placeholder="Password" name="" value="">
              </div>
              <div class="input submit">
                <input type="submit" name="login" value="Login">
                <input type="submit" name="register" value="Register">
                <input type="submit" name="logout" value="Logout">
              </div>
            </div>
            <div class="saveExplosion">
              <p>Save current explosion</p>
              <input type="text" name="exName" placeholder="Explosion Name" value="">
              <input type="submit" name="" value="Save">
            </div>
            <div class="explosionsDB">
              <div class="tableHeader">
                <table>
                  <tr>
                    <th>No</th>
                    <th>By</th>
                    <th>Name</th>
                  </tr>
                </table>
              </div>
              <div class="table">
                <table>
                  <tr>
                    <td>1</td>
                    <td>Admin</td>
                    <td>Default</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          <div class="tab about hidden">

          </div>
        </div>
      </div>
      <div class="database hidden">
        <div class="filterExpDB">
          <div data-filter="" class="filter">
            <label for="filter">Filter:</label>
            User <input type="checkbox" name="filter" value="user">
            Settings <input type="checkbox" name="filter" value="expl">
          </div>
          <div class="filter">
            <div class="input user">
              <input type="text" placeholder="User Name" name="user" value="">
            </div>
            <div class="input explosion">
              <input type="text" placeholder="Settings Name" name="explosion" value="">
            </div>
          </div>
          <div class="button">
            Filter
          </div>
        </div>
        <div class="explosionsDB">
          <div class="tableHeader">
            <table>
              <tr>
                <th>No</th>
                <th>By</th>
                <th>Name</th>
              </tr>
            </table>
          </div>
          <div class="table">
            <table>
              <tr>
                <td>1</td>
                <td>Admin</td>
                <td>Default</td>
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="buttons">
        <div class="rewind button" onclick="play(-1)">Rewind</div>
        <div class="explode button" onclick="explode(20), play(1)">Explode!</div>
        <div class="replay button" onclick="play(1)">Replay</div>
      </div>
      <!-- <div class="centerLine debuggingStuff"></div> -->
    </main>
  </body>
  <script type="text/javascript" src="js/pixelDisplay.js"></script>
  <script type="text/javascript">
    createGrid();
    aggregate();
    // letters currently have always 4 pixels in height
    // So 2 is half on the height of the text
    layout(batch, -textLen/2,-2);

    function showTab(string) {
      var panels = document.querySelectorAll('.panels .tab');
      var labels = document.querySelectorAll('.label');
      var labelsSection = document.querySelector('.labels');
      for (var i = 0; i < panels.length; i++) {
        if (panels[i].classList.contains(string)) {
          // Toggle state of label that was clicked
          if (labels[i].classList.contains('active')) {
            // If clicked label was active, deactivate
            // all tabs
            labelsSection.classList.remove('active');
          }
          else {
            labelsSection.classList.add('active');
          }
          panels[i].classList.toggle('hidden');
          labels[i].classList.toggle('active');
        }
        else {
          // Hide tabs of labels that were not clicked
          panels[i].classList.add('hidden');
          labels[i].classList.remove('active');
        }
      }
    }

    function dbWidnowHeight() {
      var main = document.querySelector('main');
      var panels = document.querySelector('div.panels .tab');
      var mainHeight = parseInt(getComputedStyle(main).height);
      var height = mainHeight - panels.offsetHeight;
      var databaseWindow = document.querySelector('div.database');
      databaseWindow.style.height = height - 1 + 'px';
    }
    function showDatabase() {
      var el = document.querySelector('div.database');
      el.classList.toggle('hidden');
      dbWidnowHeight();
    }

  </script>
</html>
